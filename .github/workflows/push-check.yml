name: ğŸ§¹ Quality Check on Commit & Push

# Run on any push or pull request
on:
    push:
        branches: ["**"]
    pull_request:
        branches: ["**"]

jobs:
    code-quality:
        name: ğŸ§© Lint, Format & Build
        runs-on: ubuntu-latest

        steps:
            # 1ï¸âƒ£ Checkout the code
            - name: ğŸ“¥ Checkout repository
              uses: actions/checkout@v4

            # 2ï¸âƒ£ Setup Node environment
            - name: ğŸ§° Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: 20
                  cache: "npm"

            # 3ï¸âƒ£ Install dependencies
            - name: ğŸ“¦ Install dependencies
              run: npm ci

            # 4ï¸âƒ£ Run ESLint check
            - name: ğŸ” Run ESLint
              run: npm run lint --if-present

            # 5ï¸âƒ£ Run Prettier format check
            - name: âœ¨ Check code formatting
              run: npm run format:check --if-present

            # 6ï¸âƒ£ Run unit tests (optional)
            - name: ğŸ§ª Run tests
              run: npm run test -- --watch=false --browsers=ChromeHeadless --no-progress
              continue-on-error: true # Set to false to block merges on failure

            # 7ï¸âƒ£ Run production build
            - name: ğŸ—ï¸ Build project
              run: npm run build --if-present
